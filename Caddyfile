prof-twist.ru {
  # API -> upstream
  handle_path /api/* {
    reverse_proxy 95.163.182.138:8080
  }

  # WebSocket proxy for /ws
  handle /ws* {
    reverse_proxy 95.163.182.138:8080 {
      transport http {
        versions 1.1 h2c
      }
    }
  }

  # Frontend (SPA)
  handle {
    root * /usr/share/caddy
    try_files {path} {path}/ /index.html
    file_server
  }
}
